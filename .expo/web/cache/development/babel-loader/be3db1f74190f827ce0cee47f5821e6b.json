{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/mayana/projets/wild/projet/baam_mobile/Components/CameraTab.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Camera } from \"expo-camera\";\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport AppContainer from \"./AppContainer\";\n\nvar CameraTabComponent = function CameraTabComponent() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var cameraRef = useRef(null);\n  useEffect(function () {\n    (function _callee() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context.sent;\n              status = _await$Camera$request.status;\n              setHasPermission(status === \"granted\");\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (hasPermission === null) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (hasPermission === false) {\n    console.log(\"test\");\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 12\n      }\n    }, \"No access to camera\");\n  }\n\n  var snap = function snap() {\n    var photo;\n    return _regeneratorRuntime.async(function snap$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!cameraRef) {\n              _context2.next = 16;\n              break;\n            }\n\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync());\n\n          case 4:\n            photo = _context2.sent;\n            console.log(photo);\n            _context2.t0 = console;\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(ImageManipulator.manipulateAsync(photo.uri, [{\n              resize: {\n                width: 400\n              }\n            }]));\n\n          case 9:\n            _context2.t1 = _context2.sent;\n\n            _context2.t0.log.call(_context2.t0, _context2.t1);\n\n            _context2.next = 16;\n            break;\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t2 = _context2[\"catch\"](1);\n            console.log(_context2.t2);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 13]], Promise);\n  };\n\n  return React.createElement(AppContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, React.createElement(Camera, {\n    ref: cameraRef,\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }), React.createElement(Button, {\n    title: \"Take new photo\",\n    onPress: snap,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CameraTabComponent;","map":{"version":3,"sources":["/home/mayana/projets/wild/projet/baam_mobile/Components/CameraTab.js"],"names":["React","useState","useEffect","useRef","Camera","ImageManipulator","AppContainer","CameraTabComponent","hasPermission","setHasPermission","cameraRef","requestPermissionsAsync","status","console","log","snap","current","takePictureAsync","photo","manipulateAsync","uri","resize","width","flex"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;;;;;AAEA,SAASC,MAAT,QAAuB,aAAvB;AACA,OAAO,KAAKC,gBAAZ,MAAkC,wBAAlC;AAEA,OAAOC,YAAP;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAAA,kBACWN,QAAQ,CAAC,IAAD,CADnB;AAAA;AAAA,MACxBO,aADwB;AAAA,MACTC,gBADS;;AAE/B,MAAMC,SAAS,GAAGP,MAAM,CAAC,IAAD,CAAxB;AAEAD,EAAAA,SAAS,CAAC,YAAM;AACd,KAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAC0BE,MAAM,CAACO,uBAAP,EAD1B;;AAAA;AAAA;AACSC,cAAAA,MADT,yBACSA,MADT;AAECH,cAAAA,gBAAgB,CAACG,MAAM,KAAK,SAAZ,CAAhB;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAID,GALQ,EAKN,EALM,CAAT;;AAOA,MAAIJ,aAAa,KAAK,IAAtB,EAA4B;AAC1B,WAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,MAAIA,aAAa,KAAK,KAAtB,EAA6B;AAC3BK,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,WAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAP;AACD;;AAED,MAAMC,IAAI,GAAG,SAAPA,IAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACPL,SADO;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,6CAGWA,SAAS,CAACM,OAAV,CAAkBC,gBAAlB,EAHX;;AAAA;AAGHC,YAAAA,KAHG;AAIPL,YAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AAJO,2BAKPL,OALO;AAAA;AAAA,6CAMCR,gBAAgB,CAACc,eAAjB,CAAiCD,KAAK,CAACE,GAAvC,EAA4C,CAChD;AAAEC,cAAAA,MAAM,EAAE;AAAEC,gBAAAA,KAAK,EAAE;AAAT;AAAV,aADgD,CAA5C,CAND;;AAAA;AAAA;;AAAA,yBAKCR,GALD;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWPD,YAAAA,OAAO,CAACC,GAAR;;AAXO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAgBA,SACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AACE,IAAA,GAAG,EAAGJ,SADR;AAEE,IAAA,KAAK,EAAE;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,gBAAd;AAA+B,IAAA,OAAO,EAAER,IAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF;AASD,CA5CD;;AA8CA,eAAeR,kBAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { StyleSheet, Text, View, Button } from \"react-native\";\nimport { Camera } from \"expo-camera\";\nimport * as ImageManipulator from 'expo-image-manipulator';\n\nimport AppContainer from \"./AppContainer\";\n\nconst CameraTabComponent = () => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const cameraRef = useRef(null);\n\n  useEffect(() => {\n    (async () => {\n      const { status } = await Camera.requestPermissionsAsync();\n      setHasPermission(status === \"granted\");\n    })();\n  }, []);\n\n  if (hasPermission === null) {\n    return <View />;\n  }\n  if (hasPermission === false) {\n    console.log(\"test\");\n    return <Text>No access to camera</Text>;\n  }\n\n  const snap = async () => {\n    if (cameraRef) {\n      try {\n        let photo = await cameraRef.current.takePictureAsync();\n        console.log(photo);\n        console.log(\n          await ImageManipulator.manipulateAsync(photo.uri, [\n            { resize: { width: 400 } },\n          ])\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  return (\n    <AppContainer>\n      <Camera\n        ref={ cameraRef }\n        style={{ flex: 1 }}\n      ></Camera>\n      <Button title=\"Take new photo\" onPress={snap} />\n    </AppContainer>\n  );\n};\n\nexport default CameraTabComponent;"]},"metadata":{},"sourceType":"module"}